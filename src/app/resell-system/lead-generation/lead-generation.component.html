<section class="banner">
  <div class="content">
    <h1>Loan application</h1>
  </div>
</section>
@if (notSubmitted) {
  <div class="progress-bar-container">
    <div class="un">
      <div class="progress-bar" [style.width]="progress + '%'"></div>
    </div>
  </div>
  <mat-horizontal-stepper [linear]="true" #stepper>
    <mat-step>
      <app-loan-option-card
        [steps]="steps['firstStep']"
        [selectedOptions]="selectedOptions"
        key="home_loan_purpose"
        title="I'm looking to:"
        (selectOption)="selectOption($event)"
        (goBack)="goBack()"
        (nextStep)="nextStep()"
      ></app-loan-option-card>
    </mat-step>
    <mat-step>
      <app-loan-option-card
        [steps]="steps['secondStep']"
        [selectedOptions]="selectedOptions"
        key="home_description"
        title="Home Description"
        (selectOption)="selectOption($event)"
        (goBack)="goBack()"
        (nextStep)="nextStep()"
      ></app-loan-option-card>
    </mat-step>
    <mat-step>
      <app-loan-option-card
        [steps]="steps['thirdStep']"
        [selectedOptions]="selectedOptions"
        key="property_use"
        title="Property Use"
        (selectOption)="selectOption($event)"
        (goBack)="goBack()"
        (nextStep)="nextStep()"
      ></app-loan-option-card>
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        <app-loan-option-card
          [steps]="steps['fourthStep']"
          [selectedOptions]="selectedOptions"
          key="home_buying_process"
          title="Where in the home buying process are you?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      } @else if (selectedOptions['home_loan_purpose'] === 'take_cash_out') {
        <app-lead-input-field
          title="Estimated Home Value"
          label="Home Value"
          errorMsgKey="estimatedHomeValue"
          placeholder="e.g. 250,000"
          [formControll]="estimatedHomeValue"
          [selectedOptions]="selectedOptions"
          [errorMsg]="estimatedHomeValueErrorMessage"
          key="estimated_home_value"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
      } @else {
        <app-loan-option-card
          [steps]="steps['refinanceReason']"
          [selectedOptions]="selectedOptions"
          key="reason_to_refinance"
          title="Why do you want to Refinance?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          [isTextCard]="true"
        ></app-loan-option-card>
      }
    </mat-step>
    @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
      @if (selectedOptions['home_buying_process'] === 'looking_at_homes') {
        <mat-step>
          <app-loan-option-card
            [isTextCard]="true"
            [steps]="steps['purchaseDate']"
            [selectedOptions]="selectedOptions"
            key="expected_home_purchase_date"
            title="When do you hope to purchase your new home?          "
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        </mat-step>
      }
    }
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        <app-loan-option-card
          [steps]="steps['yesNoStep']"
          [selectedOptions]="selectedOptions"
          key="first_time_homebuyer"
          title="Are you a first-time homebuyer?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      } @else if (selectedOptions['home_loan_purpose'] === 'take_cash_out') {
        <app-lead-input-field
          title="Please enter your mortgage balance"
          label="Mortgage Balance"
          errorMsgKey="mortgageBalance"
          placeholder="e.g. 250,000"
          [formControll]="mortgageBalance"
          [selectedOptions]="selectedOptions"
          [errorMsg]="mortgageBalanceErrorMessage"
          key="mortgage_balance"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
      } @else {
        <app-lead-input-field
          title="Estimated Home Value"
          label="Home Value"
          errorMsgKey="estimatedHomeValue"
          placeholder="e.g. 250,000"
          [formControll]="estimatedHomeValue"
          [selectedOptions]="selectedOptions"
          [errorMsg]="estimatedHomeValueErrorMessage"
          key="estimated_home_value"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        <app-loan-option-card
          [steps]="steps['yesNoStep']"
          [selectedOptions]="selectedOptions"
          key="military_service_status"
          title="Active or previous U.S. military service?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      } @else if (selectedOptions['home_loan_purpose'] === 'take_cash_out') {
        <app-lead-input-field
          title="How much additional cash would you like to borrow?"
          label="Additional Cash"
          errorMsgKey="additionalCash"
          placeholder="e.g. 250,000"
          [formControll]="additionalCash"
          [selectedOptions]="selectedOptions"
          [errorMsg]="additionalCashErrorMessage"
          key="cash_borrow"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
      } @else {
        <app-lead-input-field
          title="Please enter your mortgage balance"
          label="Mortgage Balance"
          errorMsgKey="mortgageBalance"
          placeholder="e.g. 250,000"
          [formControll]="mortgageBalance"
          [selectedOptions]="selectedOptions"
          [errorMsg]="mortgageBalanceErrorMessage"
          key="mortgage_balance"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        <app-loan-option-card
          [steps]="steps['yesNoStep']"
          [selectedOptions]="selectedOptions"
          key="real_estate_agent_engagement"
          title="Are you currently working with a real estate agent?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      } @else {
        <app-loan-option-card
          [steps]="steps['yesNoStep']"
          [selectedOptions]="selectedOptions"
          key="military_service_status"
          title="Active or previous U.S. military service?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        <app-lead-input-field
          title="Purchase price of the new home"
          label="Purchase Price"
          errorMsgKey="purchasePrice"
          placeholder="e.g. 250,000"
          [formControll]="purchasePrice"
          [selectedOptions]="selectedOptions"
          [errorMsg]="purchasePriceErrorMessage"
          key="purchase_price"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
      } @else {
        <app-loan-option-card
          width="219px"
          [steps]="steps['creditProfileStep']"
          [selectedOptions]="selectedOptions"
          key="your_credit_profile"
          title="Your Credit Profile?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        <app-lead-input-field
          title="Estimated Down Payment"
          label="Down Payment Amount"
          errorMsgKey="downPaymentAmount"
          [formControll]="downPaymentAmount"
          [selectedOptions]="selectedOptions"
          [errorMsg]="downPaymentAmountErrorMessage"
          key="estimated_down_payment"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
      } @else {
        <app-loan-option-card
          [steps]="steps['yesNoStep']"
          [selectedOptions]="selectedOptions"
          key="2nd_mortgage"
          title="Do you have a 2nd mortgage?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          <app-loan-option-card
            [steps]="steps['yesNoStep']"
            [selectedOptions]="selectedOptions"
            key="down_payment_assistance"
            title="Are you interested in down payment assistance?"
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        } @else {
          <app-loan-option-card
            width="219px"
            [steps]="steps['creditProfileStep']"
            [selectedOptions]="selectedOptions"
            key="your_credit_profile"
            title="Your Credit Profile?"
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        }
      } @else {
        <app-loan-option-card
          [steps]="steps['employmentStatus']"
          [selectedOptions]="selectedOptions"
          key="employment_status"
          title="Employment Status"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          <app-loan-option-card
            width="219px"
            [steps]="steps['creditProfileStep']"
            [selectedOptions]="selectedOptions"
            key="your_credit_profile"
            title="Your Credit Profile?"
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        } @else {
          <app-loan-option-card
            [steps]="steps['employmentStatus']"
            [selectedOptions]="selectedOptions"
            key="employment_status"
            title="Employment Status          "
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        }
      } @else {
        <app-loan-option-card
          [steps]="steps['yesNoStep']"
          [selectedOptions]="selectedOptions"
          key="bankruptcy_status"
          title="Any bankruptcy in the past 3 years?"
          (selectOption)="selectOption($event)"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
        ></app-loan-option-card>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          <app-loan-option-card
            [steps]="steps['employmentStatus']"
            [selectedOptions]="selectedOptions"
            key="employment_status"
            title="Employment Status          "
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        } @else if (selectedOptions['employment_status'] === 'employed') {
          <app-loan-option-card
            [steps]="steps['yesNoStep']"
            [selectedOptions]="selectedOptions"
            key="employer_benefits"
            title="Are you receiving any benefits from your employer for this move?"
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        } @else {
          <app-loan-option-card
            [steps]="steps['yesNoStep']"
            [selectedOptions]="selectedOptions"
            key="bankruptcy_status"
            title="Any bankruptcy in the past 3 years?"
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        }
      } @else {
        <p class="step-title">First Name</p>
        <div class="card-container">
          <mat-form-field style="width: 350px">
            <mat-label>First Name</mat-label>
            <input
              matInput
              type="text"
              placeholder="First name"
              [formControl]="firstName"
              (blur)="updateErrorMessage('firstName')"
              required
            />
            <mat-error *ngIf="firstName.invalid">{{
              firstNameErrorMessage
            }}</mat-error>
          </mat-form-field>
        </div>
        <p class="step-title">Last Name</p>
        <div class="card-container">
          <mat-form-field style="width: 350px">
            <mat-label>Last Name</mat-label>
            <input
              matInput
              type="text"
              placeholder="Last name"
              [formControl]="lastName"
              (blur)="updateErrorMessage('lastName')"
              required
            />
            <mat-error *ngIf="lastName.invalid">{{
              lastNameErrorMessage
            }}</mat-error>
          </mat-form-field>
        </div>
        <div class="btn-container">
          <button class="back" mat-button matStepperPrevious (click)="goBack()">
            Back
          </button>
          <button
            class="next"
            [ngClass]="{
              'disable-next':
                !selectedOptions['first_name'] ||
                !selectedOptions['last_name'] ||
                lastName.invalid
            }"
            [disabled]="
              !selectedOptions['first_name'] ||
              !selectedOptions['last_name'] ||
              lastName.invalid
            "
            matStepperNext
            (click)="nextStep()"
          >
            Next
          </button>
        </div>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          @if (selectedOptions['employment_status'] === 'employed') {
            <app-loan-option-card
              [steps]="steps['yesNoStep']"
              [selectedOptions]="selectedOptions"
              key="employer_benefits"
              title="Are you receiving any benefits from your employer for this move?"
              (selectOption)="selectOption($event)"
              (goBack)="goBack()"
              (nextStep)="nextStep()"
            ></app-loan-option-card>
          } @else {
            <app-loan-option-card
              [steps]="steps['yesNoStep']"
              [selectedOptions]="selectedOptions"
              key="bankruptcy_status"
              title="Any bankruptcy in the past 3 years?"
              (selectOption)="selectOption($event)"
              (goBack)="goBack()"
              (nextStep)="nextStep()"
            ></app-loan-option-card>
          }
        } @else if (selectedOptions['employment_status'] === 'employed') {
          <app-loan-option-card
            [steps]="steps['yesNoStep']"
            [selectedOptions]="selectedOptions"
            key="bankruptcy_status"
            title="Any bankruptcy in the past 3 years?"
            (selectOption)="selectOption($event)"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
          ></app-loan-option-card>
        } @else {
          <p class="step-title">First Name</p>
          <div class="card-container">
            <mat-form-field style="width: 350px">
              <mat-label>First Name</mat-label>
              <input
                matInput
                type="text"
                placeholder="First name"
                [formControl]="firstName"
                (blur)="updateErrorMessage('firstName')"
                required
              />
              <mat-error *ngIf="firstName.invalid">{{
                firstNameErrorMessage
              }}</mat-error>
            </mat-form-field>
          </div>
          <p class="step-title">Last Name</p>
          <div class="card-container">
            <mat-form-field style="width: 350px">
              <mat-label>Last Name</mat-label>
              <input
                matInput
                type="text"
                placeholder="Last name"
                [formControl]="lastName"
                (blur)="updateErrorMessage('lastName')"
                required
              />
              <mat-error *ngIf="lastName.invalid">{{
                lastNameErrorMessage
              }}</mat-error>
            </mat-form-field>
          </div>
          <div class="btn-container">
            <button
              class="back"
              mat-button
              matStepperPrevious
              (click)="goBack()"
            >
              Back
            </button>
            <button
              class="next"
              [ngClass]="{
                'disable-next':
                  !selectedOptions['first_name'] ||
                  !selectedOptions['last_name'] ||
                  lastName.invalid
              }"
              [disabled]="
                !selectedOptions['first_name'] ||
                !selectedOptions['last_name'] ||
                lastName.invalid
              "
              matStepperNext
              (click)="nextStep()"
            >
              Next
            </button>
          </div>
        }
      } @else {
        <div class="cont">
          <app-lead-input-field
            title="Phone Number"
            label="Phone Number"
            errorMsgKey="phoneNumber"
            placeholder="Phone Number"
            [formControll]="phoneNumber"
            [selectedOptions]="selectedOptions"
            [errorMsg]="phoneNumberErrorMessage"
            key="phone_number"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
            (updateErrorMessage)="updateErrorMessage($event)"
          >
            <div class="row justify-content-center">
              <div class="form-check col-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value=""
                  id="terms"
                  [(ngModel)]="check"
                  [formControl]="verifiedBadge"
                  (ngModelChange)="consernCheck()"
                />
                <label class="form-check-label mb-3" for="terms">
                  I'd like to get text messages about promotions and ways to
                  save
                </label>
                <small>
                  Data rates may apply and message frequency varies. Reply STOP
                  to unsubscribe or HELP for help.
                </small>
                <p
                  class="mt-3"
                  [style.max-height]="!showMore ? '100px' : 'fit-content'"
                  [style.overflow]="'hidden'"
                >
                  By providing your contact info and clicking “Confirm and
                  Continue” below, you agree to our Privacy Policy and Terms of
                  Use, which includes your agreement to arbitrate claims related
                  to the Telephone Consumer Protection Act. You also expressly
                  consent by electronic signature to receive sales, marketing
                  and other calls and texts, including those sent by any
                  automated system or other means for selecting and dialing
                  telephone numbers, or using an artificial or prerecorded voice
                  message when a connection is completed, from Rocket Mortgage
                  at the telephone number you provided, even if that telephone
                  number is on a do-not-call list. Agreement to receive such
                  calls or texts is not a condition of purchasing goods or
                  services from us.
                </p>
                <p>
                  <button class="btn btn-link" (click)="toggleShowMore()">
                    {{ showMore ? 'Show less' : 'Show more' }}
                  </button>
                </p>
              </div>
            </div>
          </app-lead-input-field>
        </div>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          @if (selectedOptions['employment_status'] === 'employed') {
            <app-loan-option-card
              [steps]="steps['yesNoStep']"
              [selectedOptions]="selectedOptions"
              key="bankruptcy_status"
              title="Any bankruptcy in the past 3 years?"
              (selectOption)="selectOption($event)"
              (goBack)="goBack()"
              (nextStep)="nextStep()"
            ></app-loan-option-card>
          } @else {
            <p class="step-title">First Name</p>
            <div class="card-container">
              <mat-form-field style="width: 350px">
                <mat-label>First Name</mat-label>
                <input
                  matInput
                  type="text"
                  placeholder="First name"
                  [formControl]="firstName"
                  (blur)="updateErrorMessage('firstName')"
                  required
                />
                <mat-error *ngIf="firstName.invalid">{{
                  firstNameErrorMessage
                }}</mat-error>
              </mat-form-field>
            </div>
            <p class="step-title">Last Name</p>
            <div class="card-container">
              <mat-form-field style="width: 350px">
                <mat-label>Last Name</mat-label>
                <input
                  matInput
                  type="text"
                  placeholder="Last name"
                  [formControl]="lastName"
                  (blur)="updateErrorMessage('lastName')"
                  required
                />
                <mat-error *ngIf="lastName.invalid">{{
                  lastNameErrorMessage
                }}</mat-error>
              </mat-form-field>
            </div>
            <div class="btn-container">
              <button
                class="back"
                mat-button
                matStepperPrevious
                (click)="goBack()"
              >
                Back
              </button>
              <button
                class="next"
                [ngClass]="{
                  'disable-next':
                    !selectedOptions['first_name'] ||
                    !selectedOptions['last_name'] ||
                    lastName.invalid
                }"
                [disabled]="
                  !selectedOptions['first_name'] ||
                  !selectedOptions['last_name'] ||
                  lastName.invalid
                "
                matStepperNext
                (click)="nextStep()"
              >
                Next
              </button>
            </div>
          }
        } @else if (selectedOptions['employment_status'] === 'employed') {
          <p class="step-title">First Name check</p>
          <div class="card-container">
            <mat-form-field style="width: 350px">
              <mat-label>First Name</mat-label>
              <input
                matInput
                type="text"
                placeholder="First name"
                [formControl]="firstName"
                (blur)="updateErrorMessage('firstName')"
                required
              />
              <mat-error *ngIf="firstName.invalid">{{
                firstNameErrorMessage
              }}</mat-error>
            </mat-form-field>
          </div>
          <p class="step-title">Last Name</p>
          <div class="card-container">
            <mat-form-field style="width: 350px">
              <mat-label>Last Name</mat-label>
              <input
                matInput
                type="text"
                placeholder="Last name"
                [formControl]="lastName"
                (blur)="updateErrorMessage('lastName')"
                required
              />
              <mat-error *ngIf="lastName.invalid">{{
                lastNameErrorMessage
              }}</mat-error>
            </mat-form-field>
          </div>
          <div class="btn-container">
            <button
              class="back"
              mat-button
              matStepperPrevious
              (click)="goBack()"
            >
              Back
            </button>
            <button
              class="next"
              [ngClass]="{
                'disable-next':
                  !selectedOptions['first_name'] ||
                  !selectedOptions['last_name'] ||
                  lastName.invalid
              }"
              [disabled]="
                !selectedOptions['first_name'] ||
                !selectedOptions['last_name'] ||
                lastName.invalid
              "
              matStepperNext
              (click)="nextStep()"
            >
              Next
            </button>
          </div>
        } @else {
          <div class="cont">
            <app-lead-input-field
            title="Phone Number"
            label="Phone Number"
            errorMsgKey="phoneNumber"
            placeholder="Phone Number"
            [formControll]="phoneNumber"
            [selectedOptions]="selectedOptions"
            [errorMsg]="phoneNumberErrorMessage"
            key="phone_number"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
            (updateErrorMessage)="updateErrorMessage($event)"
          >
            <div class="row justify-content-center">
              <div class="form-check col-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value=""
                  id="terms"
                  [(ngModel)]="check"
                  [formControl]="verifiedBadge"
                  (ngModelChange)="consernCheck()"
                />
                <label class="form-check-label mb-3" for="terms">
                  I'd like to get text messages about promotions and ways to
                  save
                </label>
                <small>
                  Data rates may apply and message frequency varies. Reply STOP
                  to unsubscribe or HELP for help.
                </small>
                <p
                  class="mt-3"
                  [style.max-height]="!showMore ? '100px' : 'fit-content'"
                  [style.overflow]="'hidden'"
                >
                  By providing your contact info and clicking “Confirm and
                  Continue” below, you agree to our Privacy Policy and Terms of
                  Use, which includes your agreement to arbitrate claims related
                  to the Telephone Consumer Protection Act. You also expressly
                  consent by electronic signature to receive sales, marketing
                  and other calls and texts, including those sent by any
                  automated system or other means for selecting and dialing
                  telephone numbers, or using an artificial or prerecorded voice
                  message when a connection is completed, from Rocket Mortgage
                  at the telephone number you provided, even if that telephone
                  number is on a do-not-call list. Agreement to receive such
                  calls or texts is not a condition of purchasing goods or
                  services from us.
                </p>
                <p>
                  <button class="btn btn-link" (click)="toggleShowMore()">
                    {{ showMore ? 'Show less' : 'Show more' }}
                  </button>
                </p>
              </div>
            </div>
          </app-lead-input-field>
          </div>
        }
      } @else {
        <app-lead-input-field
            title="Email Address"
            label="Email Address"
            errorMsgKey="email"
            placeholder="Email"
            [formControll]="email"
            [selectedOptions]="selectedOptions"
            [errorMsg]="emailErrorMessage"
            key="email"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
            (updateErrorMessage)="updateErrorMessage($event)"
          ></app-lead-input-field>
        
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          @if (selectedOptions['employment_status'] === 'employed') {
            <p class="step-title">First Name</p>
            <div class="card-container">
              <mat-form-field style="width: 350px">
                <mat-label>First Name</mat-label>
                <input
                  matInput
                  type="text"
                  placeholder="First name"
                  [formControl]="firstName"
                  (blur)="updateErrorMessage('firstName')"
                  required
                />
                <mat-error *ngIf="firstName.invalid">{{
                  firstNameErrorMessage
                }}</mat-error>
              </mat-form-field>
            </div>
            <p class="step-title">Last Name</p>
            <div class="card-container">
              <mat-form-field style="width: 350px">
                <mat-label>Last Name</mat-label>
                <input
                  matInput
                  type="text"
                  placeholder="Last name"
                  [formControl]="lastName"
                  (blur)="updateErrorMessage('lastName')"
                  required
                />
                <mat-error *ngIf="lastName.invalid">{{
                  lastNameErrorMessage
                }}</mat-error>
              </mat-form-field>
            </div>
            <div class="btn-container">
              <button
                class="back"
                mat-button
                matStepperPrevious
                (click)="goBack()"
              >
                Back
              </button>
              <button
                class="next"
                [ngClass]="{
                  'disable-next':
                    !selectedOptions['first_name'] ||
                    !selectedOptions['last_name'] ||
                    lastName.invalid
                }"
                [disabled]="
                  !selectedOptions['first_name'] ||
                  !selectedOptions['last_name'] ||
                  lastName.invalid
                "
                matStepperNext
                (click)="nextStep()"
              >
                Next
              </button>
            </div>
          } @else {
            <div class="cont">
              <app-lead-input-field
              title="Phone Number"
              label="Phone Number"
              errorMsgKey="phoneNumber"
              placeholder="Phone Number"
              [formControll]="phoneNumber"
              [selectedOptions]="selectedOptions"
              [errorMsg]="phoneNumberErrorMessage"
              key="phone_number"
              (goBack)="goBack()"
              (nextStep)="nextStep()"
              (updateErrorMessage)="updateErrorMessage($event)"
            >
              <div class="row justify-content-center">
                <div class="form-check col-3">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value=""
                    id="terms"
                    [(ngModel)]="check"
                    [formControl]="verifiedBadge"
                    (ngModelChange)="consernCheck()"
                  />
                  <label class="form-check-label mb-3" for="terms">
                    I'd like to get text messages about promotions and ways to
                    save
                  </label>
                  <small>
                    Data rates may apply and message frequency varies. Reply STOP
                    to unsubscribe or HELP for help.
                  </small>
                  <p
                    class="mt-3"
                    [style.max-height]="!showMore ? '100px' : 'fit-content'"
                    [style.overflow]="'hidden'"
                  >
                    By providing your contact info and clicking “Confirm and
                    Continue” below, you agree to our Privacy Policy and Terms of
                    Use, which includes your agreement to arbitrate claims related
                    to the Telephone Consumer Protection Act. You also expressly
                    consent by electronic signature to receive sales, marketing
                    and other calls and texts, including those sent by any
                    automated system or other means for selecting and dialing
                    telephone numbers, or using an artificial or prerecorded voice
                    message when a connection is completed, from Rocket Mortgage
                    at the telephone number you provided, even if that telephone
                    number is on a do-not-call list. Agreement to receive such
                    calls or texts is not a condition of purchasing goods or
                    services from us.
                  </p>
                  <p>
                    <button class="btn btn-link" (click)="toggleShowMore()">
                      {{ showMore ? 'Show less' : 'Show more' }}
                    </button>
                  </p>
                </div>
              </div>
            </app-lead-input-field>
            </div>
          }
        } @else if (selectedOptions['employment_status'] === 'employed') {
          <div class="cont">
            <app-lead-input-field
            title="Phone Number"
            label="Phone Number"
            errorMsgKey="phoneNumber"
            placeholder="Phone Number"
            [formControll]="phoneNumber"
            [selectedOptions]="selectedOptions"
            [errorMsg]="phoneNumberErrorMessage"
            key="phone_number"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
            (updateErrorMessage)="updateErrorMessage($event)"
          >
            <div class="row justify-content-center">
              <div class="form-check col-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value=""
                  id="terms"
                  [(ngModel)]="check"
                  [formControl]="verifiedBadge"
                  (ngModelChange)="consernCheck()"
                />
                <label class="form-check-label mb-3" for="terms">
                  I'd like to get text messages about promotions and ways to
                  save
                </label>
                <small>
                  Data rates may apply and message frequency varies. Reply STOP
                  to unsubscribe or HELP for help.
                </small>
                <p
                  class="mt-3"
                  [style.max-height]="!showMore ? '100px' : 'fit-content'"
                  [style.overflow]="'hidden'"
                >
                  By providing your contact info and clicking “Confirm and
                  Continue” below, you agree to our Privacy Policy and Terms of
                  Use, which includes your agreement to arbitrate claims related
                  to the Telephone Consumer Protection Act. You also expressly
                  consent by electronic signature to receive sales, marketing
                  and other calls and texts, including those sent by any
                  automated system or other means for selecting and dialing
                  telephone numbers, or using an artificial or prerecorded voice
                  message when a connection is completed, from Rocket Mortgage
                  at the telephone number you provided, even if that telephone
                  number is on a do-not-call list. Agreement to receive such
                  calls or texts is not a condition of purchasing goods or
                  services from us.
                </p>
                <p>
                  <button class="btn btn-link" (click)="toggleShowMore()">
                    {{ showMore ? 'Show less' : 'Show more' }}
                  </button>
                </p>
              </div>
            </div>
          </app-lead-input-field>
          </div>
        } @else {
          <app-lead-input-field
          title="Email Address"
          label="Email Address"
          errorMsgKey="email"
          placeholder="Email"
          [formControll]="email"
          [selectedOptions]="selectedOptions"
          [errorMsg]="emailErrorMessage"
          key="email"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
        }
      } @else {
        <p class="step-title">Current Mailing Address</p>
        <div class="card-container">
          <AutocompleteComponent
            aria-placeholder="Address"
            class="direction-field"
            (setAddress)="getAddress($event)"
            adressType="geocode"
            [value]="direction"
          >
          </AutocompleteComponent>
        </div>
        <div class="btn-container">
          <button class="back" mat-button matStepperPrevious (click)="goBack()">
            Back
          </button>
          <button
            class="next"
            [ngClass]="{
              'disable-next': !selectedOptions['current_mailing_address']
            }"
            [disabled]="!selectedOptions['current_mailing_address']"
            (click)="submitLead()"
          >
            Click to see your Result
          </button>
        </div>
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          @if (selectedOptions['employment_status'] === 'employed') {
            <div class="cont">
              <app-lead-input-field
              title="Phone Number"
              label="Phone Number"
              errorMsgKey="phoneNumber"
              placeholder="Phone Number"
              [formControll]="phoneNumber"
              [selectedOptions]="selectedOptions"
              [errorMsg]="phoneNumberErrorMessage"
              key="phone_number"
              (goBack)="goBack()"
              (nextStep)="nextStep()"
              (updateErrorMessage)="updateErrorMessage($event)"
            >
              <div class="row justify-content-center">
                <div class="form-check col-3">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value=""
                    id="terms"
                    [(ngModel)]="check"
                    [formControl]="verifiedBadge"
                    (ngModelChange)="consernCheck()"
                  />
                  <label class="form-check-label mb-3" for="terms">
                    I'd like to get text messages about promotions and ways to
                    save
                  </label>
                  <small>
                    Data rates may apply and message frequency varies. Reply STOP
                    to unsubscribe or HELP for help.
                  </small>
                  <p
                    class="mt-3"
                    [style.max-height]="!showMore ? '100px' : 'fit-content'"
                    [style.overflow]="'hidden'"
                  >
                    By providing your contact info and clicking “Confirm and
                    Continue” below, you agree to our Privacy Policy and Terms of
                    Use, which includes your agreement to arbitrate claims related
                    to the Telephone Consumer Protection Act. You also expressly
                    consent by electronic signature to receive sales, marketing
                    and other calls and texts, including those sent by any
                    automated system or other means for selecting and dialing
                    telephone numbers, or using an artificial or prerecorded voice
                    message when a connection is completed, from Rocket Mortgage
                    at the telephone number you provided, even if that telephone
                    number is on a do-not-call list. Agreement to receive such
                    calls or texts is not a condition of purchasing goods or
                    services from us.
                  </p>
                  <p>
                    <button class="btn btn-link" (click)="toggleShowMore()">
                      {{ showMore ? 'Show less' : 'Show more' }}
                    </button>
                  </p>
                </div>
              </div>
            </app-lead-input-field>
            </div>
          } @else {
            <app-lead-input-field
            title="Email Address"
            label="Email Address"
            errorMsgKey="email"
            placeholder="Email"
            [formControll]="email"
            [selectedOptions]="selectedOptions"
            [errorMsg]="emailErrorMessage"
            key="email"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
            (updateErrorMessage)="updateErrorMessage($event)"
          ></app-lead-input-field>
          }
        } @else if (selectedOptions['employment_status'] === 'employed') {
          <app-lead-input-field
          title="Email Address"
          label="Email Address"
          errorMsgKey="email"
          placeholder="Email"
          [formControll]="email"
          [selectedOptions]="selectedOptions"
          [errorMsg]="emailErrorMessage"
          key="email"
          (goBack)="goBack()"
          (nextStep)="nextStep()"
          (updateErrorMessage)="updateErrorMessage($event)"
        ></app-lead-input-field>
        } @else {
          <p class="step-title">Current Mailing Address</p>
          <div class="card-container">
            <AutocompleteComponent
              aria-placeholder="Address"
              class="direction-field"
              (setAddress)="getAddress($event)"
              adressType="geocode"
              [value]="direction"
            >
            </AutocompleteComponent>
          </div>
          <div class="btn-container">
            <button
              class="back"
              mat-button
              matStepperPrevious
              (click)="goBack()"
            >
              Back
            </button>
            <button
              class="next"
              [ngClass]="{
                'disable-next': !selectedOptions['current_mailing_address']
              }"
              [disabled]="!selectedOptions['current_mailing_address']"
              (click)="submitLead()"
            >
              Click to see your Result
            </button>
          </div>
        }
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          @if (selectedOptions['employment_status'] === 'employed') {
            <app-lead-input-field
            title="Email Address"
            label="Email Address"
            errorMsgKey="email"
            placeholder="Email"
            [formControll]="email"
            [selectedOptions]="selectedOptions"
            [errorMsg]="emailErrorMessage"
            key="email"
            (goBack)="goBack()"
            (nextStep)="nextStep()"
            (updateErrorMessage)="updateErrorMessage($event)"
          ></app-lead-input-field>
          } @else {
            <p class="step-title">Current Mailing Address</p>
            <div class="card-container">
              <AutocompleteComponent
                aria-placeholder="Address"
                class="direction-field"
                (setAddress)="getAddress($event)"
                adressType="geocode"
                [value]="direction"
              >
              </AutocompleteComponent>
            </div>
            <div class="btn-container">
              <button
                class="back"
                mat-button
                matStepperPrevious
                (click)="goBack()"
              >
                Back
              </button>
              <button
                class="next"
                [ngClass]="{
                  'disable-next': !selectedOptions['current_mailing_address']
                }"
                [disabled]="!selectedOptions['current_mailing_address']"
                (click)="submitLead()"
              >
                Click to see your Result
              </button>
            </div>
          }
        } @else if (selectedOptions['employment_status'] === 'employed') {
          <p class="step-title">Current Mailing Address</p>
          <div class="card-container">
            <!-- <mat-form-field style="width: 350px">
              <mat-label>Current Mailing Address </mat-label>
              <AutocompleteComponent
                aria-placeholder="Address"
                class="direction-field"
                (setAddress)="getAddress($event)"
                adressType="geocode"
                [value]="direction"
              >
              </AutocompleteComponent>
              <i class="fa-solid fa-location-dot input-icon"></i>
              <mat-error *ngIf="address.invalid">{{
                addressErrorMessage
              }}</mat-error>
            </mat-form-field> -->
            <AutocompleteComponent
              aria-placeholder="Address"
              class="direction-field"
              (setAddress)="getAddress($event)"
              adressType="geocode"
              [value]="direction"
            >
            </AutocompleteComponent>
          </div>
          <div class="btn-container">
            <button
              class="back"
              mat-button
              matStepperPrevious
              (click)="goBack()"
            >
              Back
            </button>
            <button
              class="next"
              [ngClass]="{
                'disable-next':
                  !selectedOptions['current_mailing_address'] || address.invalid
              }"
              [disabled]="
                !selectedOptions['current_mailing_address'] || address.invalid
              "
              (click)="submitLead()"
            >
              Click to see your Result
            </button>
          </div>
        }
      }
    </mat-step>
    <mat-step>
      @if (selectedOptions['home_loan_purpose'] === 'buy_a_new_home') {
        @if (
          convertNumber(selectedOptions['estimated_down_payment']) < 466465
        ) {
          @if (selectedOptions['employment_status'] === 'employed') {
            <p class="step-title">Current Mailing Address</p>
            <div class="card-container">
              <AutocompleteComponent
                aria-placeholder="Address"
                class="direction-field"
                (setAddress)="getAddress($event)"
                adressType="geocode"
                [value]="direction"
              >
              </AutocompleteComponent>
            </div>
            <div class="btn-container">
              <button
                class="back"
                mat-button
                matStepperPrevious
                (click)="goBack()"
              >
                Back
              </button>
              <button
                class="next"
                [ngClass]="{
                  'disable-next': !selectedOptions['current_mailing_address']
                }"
                [disabled]="!selectedOptions['current_mailing_address']"
                (click)="submitLead()"
              >
                Click to see your Result
              </button>
            </div>
          }
        }
      }
    </mat-step>
  </mat-horizontal-stepper>
} @else {
  <div class="end-cont">
    <div>
      <p class="title-end">Continue With An Expert</p>
      <p>
        Whether you're just getting started, or ready to close, we'll support
        you every step of the way.
      </p>
      <p>
        One of our licensed home loan experts will call you shortly to walk
        through the next steps.
      </p>
      <p>
        If you'd rather not wait, you can call us at <span class="number" (click)="makeCall('8004439131')" > (800) 443-9131</span> during our
        regular business hours.
      </p>

      <ul>
        <li>Monday - Friday, 8:00 a.m. - 10:00 p.m. ET</li>
        <li>Saturday, 9:00 a.m. - 8:00 p.m. ET</li>
        <li>Sunday, 10:00 a.m. - 7:00 p.m. ET</li>
      </ul>
    </div>
  </div>
}
